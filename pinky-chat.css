/* Pinky Chat - Clean Modern Design */
#chat-view { display: none; height: calc(100vh - 80px); padding: 0; }
#chat-view.active { display: flex; }
.chat-container { display: flex; width: 100%; height: 100%; gap: 0; background: var(--bg-card, #ffffff); }

.chat-sidebar { width: 300px; min-width: 300px; background: var(--bg-sidebar, #ffffff); border-right: 1px solid var(--border-default, rgba(102,126,234,0.15)); display: flex; flex-direction: column; overflow: hidden; }
.chat-sidebar-header { padding: 20px 18px 16px; border-bottom: 1px solid var(--border-default, rgba(102,126,234,0.15)); display: flex; flex-direction: column; gap: 12px; }
.chat-sidebar-header h3 { margin: 0; color: var(--text-heading, #667eea); font-size: 0.8em; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; letter-spacing: 1.5px; font-weight: 700; text-transform: uppercase; }
.chat-new-btn { width: 100%; padding: 11px 16px; background: var(--gradient-primary, linear-gradient(135deg, #667eea 0%, #764ba2 100%)); border: none; color: #ffffff; border-radius: 10px; cursor: pointer; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 0.88em; font-weight: 700; transition: all 0.2s; letter-spacing: 0.5px; box-shadow: 0 2px 8px rgba(102,126,234,0.25); }
.chat-new-btn:hover { transform: translateY(-1px); box-shadow: 0 4px 16px rgba(102,126,234,0.35); filter: brightness(1.05); }
.chat-search-box { position: relative; }
.chat-search-box input { width: 100%; padding: 10px 14px 10px 36px; background: var(--bg-subtle, #f4f5fb); border: 1px solid var(--border-default, rgba(102,126,234,0.15)); border-radius: 10px; color: var(--text-primary, #1a1a2e); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 0.88em; outline: none; box-sizing: border-box; transition: border-color 0.2s, box-shadow 0.2s; }
.chat-search-box input::placeholder { color: var(--text-muted, #888); }
.chat-search-box input:focus { border-color: var(--accent-primary, #667eea); box-shadow: 0 0 0 3px rgba(102,126,234,0.1); }
.chat-search-box::before { content: '\1F50D'; position: absolute; left: 12px; top: 50%; transform: translateY(-50%); font-size: 0.8em; opacity: 0.5; }

.chat-session-list { flex: 1; overflow-y: auto; padding: 10px 12px; }
.chat-session-list::-webkit-scrollbar { width: 4px; }
.chat-session-list::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb, #667eea); border-radius: 4px; }
.chat-session-item { padding: 14px; margin-bottom: 4px; border-radius: 10px; cursor: pointer; transition: all 0.15s ease; border: 1px solid transparent; position: relative; }
.chat-session-item:hover { background: var(--bg-subtle, #f4f5fb); border-color: var(--border-default, rgba(102,126,234,0.15)); }
.chat-session-item.active { background: var(--bg-subtle, #f4f5fb); border-color: var(--accent-primary, #667eea); border-left: 3px solid var(--accent-primary, #667eea); }
.chat-session-title { color: var(--text-primary, #1a1a2e); font-size: 0.9em; font-weight: 600; margin-bottom: 5px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.3; }
.chat-session-meta { color: var(--text-muted, #888); font-size: 0.78em; display: flex; justify-content: space-between; align-items: center; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
.chat-session-preview { color: var(--text-secondary, #555); font-size: 0.82em; margin-top: 4px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; line-height: 1.4; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
.chat-session-delete { opacity: 0; background: none; border: none; color: #dc3545; cursor: pointer; font-size: 0.85em; padding: 4px 8px; border-radius: 6px; transition: all 0.15s; position: absolute; top: 10px; right: 10px; }
.chat-session-item:hover .chat-session-delete { opacity: 0.5; }
.chat-session-delete:hover { opacity: 1 !important; background: rgba(220,53,69,0.08); }

.chat-main { flex: 1; display: flex; flex-direction: column; min-width: 0; background: var(--bg-subtle, #f4f5fb); }
.chat-header { padding: 14px 22px; background: var(--bg-card, #ffffff); border-bottom: 1px solid var(--border-default, rgba(102,126,234,0.15)); display: flex; justify-content: space-between; align-items: center; }
.chat-header-title { color: var(--text-heading, #667eea); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 0.95em; font-weight: 700; display: flex; align-items: center; gap: 10px; }
.chat-header-title .status-dot { width: 9px; height: 9px; background: var(--accent-green, #00c853); border-radius: 50%; animation: pulse-dot 2s infinite; }
@keyframes pulse-dot { 0%,100%{opacity:1} 50%{opacity:0.4} }
.chat-header-stats { color: var(--text-muted, #888); font-size: 0.8em; }

.chat-messages { flex: 1; overflow-y: auto; padding: 24px; display: flex; flex-direction: column; gap: 18px; }
.chat-messages::-webkit-scrollbar { width: 5px; }
.chat-messages::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb, #667eea); border-radius: 5px; }
.chat-empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; text-align: center; gap: 14px; }
.chat-empty-state .pinky-ascii { font-family: 'Courier New', monospace; font-size: 0.75em; color: var(--text-muted, #aaa); white-space: pre; line-height: 1.2; opacity: 0.6; }
.chat-empty-state h3 { color: var(--text-secondary, #555); font-size: 1.15em; font-weight: 600; }
.chat-empty-state p { color: var(--text-muted, #888); font-size: 0.9em; max-width: 400px; line-height: 1.5; }

.chat-msg { display: flex; gap: 12px; max-width: 80%; animation: msg-appear 0.25s ease-out; }
@keyframes msg-appear { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:translateY(0)} }
.chat-msg.user { align-self: flex-end; flex-direction: row-reverse; }
.chat-msg.assistant { align-self: flex-start; }
.chat-msg-avatar { width: 36px; height: 36px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.1em; flex-shrink: 0; }
.chat-msg.user .chat-msg-avatar { background: linear-gradient(135deg, #667eea33, #764ba233); border: 1px solid rgba(102,126,234,0.3); }
.chat-msg.assistant .chat-msg-avatar { background: linear-gradient(135deg, rgba(240,147,251,0.15), rgba(255,102,170,0.15)); border: 1px solid rgba(240,147,251,0.3); }
.chat-msg-body { display: flex; flex-direction: column; gap: 4px; }
.chat-msg-name { font-size: 0.75em; font-weight: 700; letter-spacing: 0.3px; }
.chat-msg.user .chat-msg-name { color: var(--accent-primary, #667eea); text-align: right; }
.chat-msg.assistant .chat-msg-name { color: var(--accent-pink, #f093fb); }
.chat-msg-content { padding: 14px 18px; border-radius: 14px; font-size: 0.92em; line-height: 1.65; word-wrap: break-word; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
.chat-msg.user .chat-msg-content { background: var(--bg-card, #ffffff); border: 1px solid var(--border-default); color: var(--text-primary, #1a1a2e); border-top-right-radius: 4px; box-shadow: 0 1px 4px rgba(0,0,0,0.05); }
.chat-msg.assistant .chat-msg-content { background: var(--gradient-primary); color: #ffffff; border-top-left-radius: 4px; box-shadow: 0 2px 8px rgba(102,126,234,0.2); }
.chat-msg-content code { background: rgba(0,0,0,0.08); padding: 2px 7px; border-radius: 5px; font-family: 'Courier New', monospace; font-size: 0.88em; }
.chat-msg.assistant .chat-msg-content code { background: rgba(255,255,255,0.15); color: #e0ffe0; }
.chat-msg-content pre { background: rgba(0,0,0,0.06); padding: 14px; border-radius: 10px; overflow-x: auto; margin: 8px 0; border: 1px solid var(--border-subtle, rgba(0,0,0,0.06)); }
.chat-msg.assistant .chat-msg-content pre { background: rgba(0,0,0,0.2); border-color: rgba(255,255,255,0.1); }
.chat-msg-content pre code { background: none; padding: 0; }
.chat-msg-time { font-size: 0.7em; color: var(--text-muted, #888); }
.chat-msg.user .chat-msg-time { text-align: right; }

.chat-typing { display: flex; gap: 12px; align-self: flex-start; max-width: 80%; animation: msg-appear 0.25s ease-out; }
.chat-typing .chat-msg-content { background: var(--bg-card); border: 1px solid var(--border-default); padding: 14px 22px; border-radius: 14px; border-top-left-radius: 4px; }
.typing-dots { display: flex; gap: 5px; align-items: center; }
.typing-dots span { width: 7px; height: 7px; background: var(--accent-primary, #667eea); border-radius: 50%; animation: typing-bounce 1.4s infinite; }
.typing-dots span:nth-child(2) { animation-delay: 0.2s; }
.typing-dots span:nth-child(3) { animation-delay: 0.4s; }
@keyframes typing-bounce { 0%,60%,100%{transform:translateY(0);opacity:0.3} 30%{transform:translateY(-7px);opacity:1} }

.chat-input-area { padding: 18px 22px; background: var(--bg-card, #ffffff); border-top: 1px solid var(--border-default); }
.chat-input-wrapper { display: flex; gap: 12px; align-items: flex-end; }
.chat-input-wrapper textarea { flex: 1; padding: 13px 18px; background: var(--bg-subtle, #f4f5fb); border: 1px solid var(--border-default); border-radius: 14px; color: var(--text-primary); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 0.92em; resize: none; outline: none; min-height: 46px; max-height: 150px; line-height: 1.5; transition: border-color 0.2s, box-shadow 0.2s; }
.chat-input-wrapper textarea:focus { border-color: var(--accent-primary, #667eea); box-shadow: 0 0 0 3px rgba(102,126,234,0.1); }
.chat-input-wrapper textarea::placeholder { color: var(--text-muted, #888); }
.chat-send-btn { padding: 13px 22px; background: var(--gradient-primary); border: none; border-radius: 14px; color: #ffffff; font-weight: 700; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 0.9em; cursor: pointer; transition: all 0.2s; white-space: nowrap; box-shadow: 0 2px 8px rgba(102,126,234,0.25); }
.chat-send-btn:hover { transform: translateY(-1px); box-shadow: 0 4px 16px rgba(102,126,234,0.35); }
.chat-send-btn:disabled { background: var(--bg-subtle, #e0e0e0); color: var(--text-muted, #888); cursor: not-allowed; transform: none; box-shadow: none; }
.chat-input-hint { margin-top: 8px; font-size: 0.75em; color: var(--text-muted, #888); text-align: right; }

.chat-search-results { padding: 8px; }
.chat-search-result { padding: 12px 14px; margin-bottom: 6px; background: var(--bg-subtle); border: 1px solid var(--border-default); border-radius: 10px; cursor: pointer; transition: all 0.15s; }
.chat-search-result:hover { background: var(--bg-card-hover); border-color: var(--accent-primary); }
.chat-search-result-title { color: var(--accent-primary); font-size: 0.85em; font-weight: 600; margin-bottom: 4px; }
.chat-search-result-match { color: var(--text-secondary); font-size: 0.8em; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

/* Dark mode chat overrides */
html[data-theme="dark"] .chat-container, html.dark-mode .chat-container { background: #0a0e17; }
html[data-theme="dark"] .chat-sidebar, html.dark-mode .chat-sidebar { background: #0d1220; border-right-color: rgba(0,212,255,0.12); }
html[data-theme="dark"] .chat-sidebar-header, html.dark-mode .chat-sidebar-header { border-bottom-color: rgba(0,212,255,0.1); }
html[data-theme="dark"] .chat-sidebar-header h3, html.dark-mode .chat-sidebar-header h3 { color: #00d4ff; }
html[data-theme="dark"] .chat-new-btn, html.dark-mode .chat-new-btn { background: linear-gradient(135deg, rgba(0,212,255,0.15), rgba(0,255,136,0.15)); border: 1px solid rgba(0,212,255,0.3); color: #00d4ff; box-shadow: none; }
html[data-theme="dark"] .chat-new-btn:hover, html.dark-mode .chat-new-btn:hover { background: linear-gradient(135deg, rgba(0,212,255,0.25), rgba(0,255,136,0.25)); border-color: rgba(0,212,255,0.5); }
html[data-theme="dark"] .chat-search-box input, html.dark-mode .chat-search-box input { background: rgba(255,255,255,0.04); border-color: rgba(0,212,255,0.12); color: #c0c8e0; }
html[data-theme="dark"] .chat-search-box input:focus, html.dark-mode .chat-search-box input:focus { border-color: rgba(0,212,255,0.4); box-shadow: 0 0 0 3px rgba(0,212,255,0.08); }
html[data-theme="dark"] .chat-session-item:hover, html.dark-mode .chat-session-item:hover { background: rgba(0,212,255,0.05); border-color: rgba(0,212,255,0.1); }
html[data-theme="dark"] .chat-session-item.active, html.dark-mode .chat-session-item.active { background: rgba(0,212,255,0.08); border-color: rgba(0,212,255,0.25); border-left-color: #00d4ff; }
html[data-theme="dark"] .chat-session-title, html.dark-mode .chat-session-title { color: #e0e6f0; }
html[data-theme="dark"] .chat-session-meta, html.dark-mode .chat-session-meta { color: #556070; }
html[data-theme="dark"] .chat-session-preview, html.dark-mode .chat-session-preview { color: #667a8a; }
html[data-theme="dark"] .chat-main, html.dark-mode .chat-main { background: #0a0e17; }
html[data-theme="dark"] .chat-header, html.dark-mode .chat-header { background: linear-gradient(135deg, #0d1220, #131a2e); border-bottom-color: rgba(0,212,255,0.1); }
html[data-theme="dark"] .chat-header-title, html.dark-mode .chat-header-title { color: #00d4ff; }
html[data-theme="dark"] .chat-msg.user .chat-msg-content, html.dark-mode .chat-msg.user .chat-msg-content { background: linear-gradient(135deg, #00284a, #001a3a); border-color: rgba(0,212,255,0.15); color: #c8d8e8; box-shadow: none; }
html[data-theme="dark"] .chat-msg.assistant .chat-msg-content, html.dark-mode .chat-msg.assistant .chat-msg-content { background: linear-gradient(135deg, #1a1028, #2d1b50); border: 1px solid rgba(240,147,251,0.12); color: #d0c8e0; box-shadow: none; }
html[data-theme="dark"] .chat-msg.assistant .chat-msg-content code, html.dark-mode .chat-msg.assistant .chat-msg-content code { background: rgba(0,0,0,0.3); color: #00ff88; }
html[data-theme="dark"] .chat-msg.user .chat-msg-name, html.dark-mode .chat-msg.user .chat-msg-name { color: #00d4ff; }
html[data-theme="dark"] .chat-msg.assistant .chat-msg-name, html.dark-mode .chat-msg.assistant .chat-msg-name { color: #ff66aa; }
html[data-theme="dark"] .chat-input-area, html.dark-mode .chat-input-area { background: linear-gradient(135deg, #0d1220, #101828); border-top-color: rgba(0,212,255,0.1); }
html[data-theme="dark"] .chat-input-wrapper textarea, html.dark-mode .chat-input-wrapper textarea { background: rgba(255,255,255,0.04); border-color: rgba(0,212,255,0.15); color: #c8d8e8; }
html[data-theme="dark"] .chat-input-wrapper textarea:focus, html.dark-mode .chat-input-wrapper textarea:focus { border-color: rgba(0,212,255,0.4); box-shadow: 0 0 0 3px rgba(0,212,255,0.08); }
html[data-theme="dark"] .chat-input-wrapper textarea::placeholder, html.dark-mode .chat-input-wrapper textarea::placeholder { color: #3a4560; }
html[data-theme="dark"] .chat-send-btn, html.dark-mode .chat-send-btn { background: linear-gradient(135deg, #00d4ff, #0088cc); color: #000; }
html[data-theme="dark"] .chat-send-btn:disabled, html.dark-mode .chat-send-btn:disabled { background: #1a2030; color: #3a4560; box-shadow: none; }
html[data-theme="dark"] .chat-typing .chat-msg-content, html.dark-mode .chat-typing .chat-msg-content { background: linear-gradient(135deg, #1a1028, #140e22); border-color: rgba(255,68,170,0.12); }
html[data-theme="dark"] .typing-dots span, html.dark-mode .typing-dots span { background: #ff66aa; }
html[data-theme="dark"] .chat-empty-state .pinky-ascii, html.dark-mode .chat-empty-state .pinky-ascii { color: #1e2a40; }
html[data-theme="dark"] .chat-empty-state h3, html.dark-mode .chat-empty-state h3 { color: #556070; }
html[data-theme="dark"] .chat-empty-state p, html.dark-mode .chat-empty-state p { color: #3a4560; }

@media (max-width: 768px) {
    .chat-sidebar { width: 64px; min-width: 64px; }
    .chat-sidebar-header h3, .chat-search-box, .chat-session-meta, .chat-session-preview, .chat-session-title { display: none; }
    .chat-new-btn { font-size: 1.2em; padding: 10px; text-indent: -9999px; position: relative; }
    .chat-new-btn::after { content: '+'; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); text-indent: 0; font-size: 1.2em; }
    .chat-session-item { display: flex; align-items: center; justify-content: center; padding: 12px 8px; }
    .chat-session-item::before { content: '\1F4AC'; font-size: 1.2em; }
    .chat-msg { max-width: 92%; }
}
