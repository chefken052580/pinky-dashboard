<!-- Metamask Wallet Widget - EVM Chain Support -->
<div class="metamask-connect-section" style="margin-top: 30px; padding: 20px; border: 2px solid #f6851b; border-radius: 12px; background: linear-gradient(135deg, rgba(246, 133, 27, 0.1), rgba(0, 0, 0, 0.3));">
  <h3 style="color: #f6851b;">ðŸ¦Š Metamask (EVM Chains)</h3>
  
  <div id="metamask-status" style="font-size: 14px; margin: 10px 0; font-weight: bold;">ðŸ”´ Not connected</div>
  
  <div id="metamask-chain-info" style="display: none; font-size: 12px; color: #999; margin: 5px 0;">Chain: Unknown</div>
  
  <div class="metamask-info-grid" style="display: none; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;" id="metamask-info-grid">
    <div class="wallet-info-card" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px;">
      <h4 style="margin: 0 0 8px 0; font-size: 12px; color: #999;">ETH Balance</h4>
      <p id="metamask-eth-balance" style="display: none; margin: 0; font-size: 18px; font-weight: bold;">0.0000 ETH</p>
    </div>
    
    <div class="wallet-info-card" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px;">
      <h4 style="margin: 0 0 8px 0; font-size: 12px; color: #999;">PINKY Balance</h4>
      <p id="metamask-token-balance" style="display: none; margin: 0; font-size: 18px; font-weight: bold;">0 PINKY</p>
    </div>
  </div>
  
  <div style="margin-top: 15px;">
    <span id="metamask-discount-badge" class="discount-badge" style="display: none; padding: 8px 15px; border-radius: 6px; font-size: 12px; font-weight: bold;"></span>
  </div>
  
  <div style="margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
    <button id="metamask-connect-btn" 
            onclick="window.DashboardMetamaskConnect && window.DashboardMetamaskConnect.connect()"
            style="background: linear-gradient(135deg, #f6851b, #e2761b); color: #fff; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: bold; transition: all 0.3s ease;">
      ðŸ¦Š Connect Metamask
    </button>
    
    <button id="metamask-disconnect-btn" 
            onclick="window.DashboardMetamaskConnect && window.DashboardMetamaskConnect.disconnect()" 
            style="display: none; background: transparent; border: 2px solid #f6851b; color: #f6851b; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: bold; transition: all 0.3s ease;">
      Disconnect
    </button>
    
    <button id="metamask-refresh-btn" 
            onclick="window.DashboardMetamaskConnect && window.DashboardMetamaskConnect.refreshBalance()" 
            style="display: none; background: transparent; border: 1px solid #00d4ff; color: #00d4ff; padding: 10px 20px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">
      ðŸ”„ Refresh
    </button>
  </div>
  
  <div class="wallet-help-text" style="margin-top: 15px; font-size: 12px; color: #999; line-height: 1.6;">
    <strong>ðŸ’¡ Multi-Chain Support:</strong> Connect your Metamask wallet to verify PINKY token holdings on Ethereum, BSC, Polygon, Arbitrum, Optimism, and Base.
    <br><br>
    <strong>ðŸ“Š Supported Chains:</strong> Ethereum â€¢ BSC â€¢ Polygon â€¢ Arbitrum â€¢ Optimism â€¢ Base
    <br><br>
    Holders with 10,000+ PINKY tokens receive an automatic <strong>20% discount</strong> on Pro subscriptions.
  </div>
</div>

<script>
// Enhanced UI updates when Metamask connects/disconnects
if (typeof window.DashboardMetamaskConnect !== 'undefined') {
  const originalUpdateUI = window.DashboardMetamaskConnect.updateUI.bind(window.DashboardMetamaskConnect);
  
  window.DashboardMetamaskConnect.updateUI = function() {
    originalUpdateUI();
    
    // Show/hide additional UI elements
    const infoGrid = document.getElementById('metamask-info-grid');
    const refreshBtn = document.getElementById('metamask-refresh-btn');
    
    if (this.walletAddress) {
      if (infoGrid) infoGrid.style.display = 'grid';
      if (refreshBtn) refreshBtn.style.display = 'inline-block';
    } else {
      if (infoGrid) infoGrid.style.display = 'none';
      if (refreshBtn) refreshBtn.style.display = 'none';
    }
  };
}
</script>

<style>
.discount-badge.active {
  background: linear-gradient(135deg, #00ff88, #00d4ff);
  color: #000;
}

.discount-badge.inactive {
  background: rgba(255, 255, 255, 0.1);
  color: #999;
  border: 1px solid #555;
}

@keyframes slideIn {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideOut {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(100%);
    opacity: 0;
  }
}
</style>

<!-- Load Metamask detection script -->
<script src="dashboard-metamask-connect.js"></script>
