<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Workspace Admin Panel - PinkyBot</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 20px;
      min-height: 100vh;
    }

    .admin-container {
      max-width: 1400px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header h1 {
      font-size: 28px;
      font-weight: 600;
    }

    .header .stats {
      display: flex;
      gap: 30px;
    }

    .stat-card {
      text-align: center;
    }

    .stat-card .number {
      font-size: 32px;
      font-weight: bold;
    }

    .stat-card .label {
      font-size: 12px;
      opacity: 0.9;
      text-transform: uppercase;
    }

    .tabs {
      display: flex;
      background: #f5f5f5;
      border-bottom: 2px solid #e0e0e0;
    }

    .tab {
      padding: 15px 30px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s;
      border-bottom: 3px solid transparent;
    }

    .tab:hover {
      background: #ececec;
    }

    .tab.active {
      background: white;
      border-bottom-color: #667eea;
      color: #667eea;
    }

    .content {
      padding: 30px;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .action-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding: 15px;
      background: #f9f9f9;
      border-radius: 8px;
    }

    .search-box {
      display: flex;
      gap: 10px;
      align-items: center;
      flex: 1;
      max-width: 400px;
    }

    .search-box input {
      flex: 1;
      padding: 10px 15px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s;
      font-size: 14px;
    }

    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
    }

    .btn-danger {
      background: #dc3545;
      color: white;
    }

    .btn-success {
      background: #28a745;
      color: white;
    }

    .table-container {
      overflow-x: auto;
      border-radius: 8px;
      border: 1px solid #e0e0e0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    thead {
      background: #f5f5f5;
    }

    th {
      padding: 15px;
      text-align: left;
      font-weight: 600;
      color: #333;
      border-bottom: 2px solid #e0e0e0;
    }

    td {
      padding: 15px;
      border-bottom: 1px solid #f0f0f0;
    }

    tr:hover {
      background: #f9f9f9;
    }

    .badge {
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      display: inline-block;
    }

    .badge-active {
      background: #d4edda;
      color: #155724;
    }

    .badge-inactive {
      background: #f8d7da;
      color: #721c24;
    }

    .badge-admin {
      background: #d1ecf1;
      color: #0c5460;
    }

    .badge-member {
      background: #fff3cd;
      color: #856404;
    }

    .badge-viewer {
      background: #e2e3e5;
      color: #383d41;
    }

    .actions {
      display: flex;
      gap: 8px;
    }

    .actions button {
      padding: 6px 12px;
      font-size: 12px;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 12px;
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .modal-header {
      margin-bottom: 20px;
    }

    .modal-header h2 {
      font-size: 24px;
      color: #333;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #333;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
    }

    .form-group textarea {
      resize: vertical;
      min-height: 80px;
    }

    .modal-footer {
      display: flex;
      gap: 10px;
      justify-content: flex-end;
      margin-top: 25px;
    }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #666;
    }

    .empty-state svg {
      width: 80px;
      height: 80px;
      margin-bottom: 20px;
      opacity: 0.3;
    }

    .empty-state h3 {
      font-size: 20px;
      margin-bottom: 10px;
    }

    .empty-state p {
      font-size: 14px;
      margin-bottom: 20px;
    }

    .activity-log {
      max-height: 400px;
      overflow-y: auto;
    }

    .activity-item {
      display: flex;
      gap: 15px;
      padding: 15px;
      border-left: 3px solid #667eea;
      margin-bottom: 10px;
      background: #f9f9f9;
      border-radius: 6px;
    }

    .activity-item .icon {
      width: 40px;
      height: 40px;
      background: #667eea;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      flex-shrink: 0;
    }

    .activity-item .details {
      flex: 1;
    }

    .activity-item .details .action {
      font-weight: 600;
      color: #333;
      margin-bottom: 5px;
    }

    .activity-item .details .meta {
      font-size: 12px;
      color: #666;
    }
  </style>
</head>
<body>
  <div class="admin-container">
    <div class="header">
      <h1>üè¢ Workspace Admin Panel</h1>
      <div class="stats">
        <div class="stat-card">
          <div class="number" id="total-workspaces">0</div>
          <div class="label">Workspaces</div>
        </div>
        <div class="stat-card">
          <div class="number" id="total-members">0</div>
          <div class="label">Total Members</div>
        </div>
        <div class="stat-card">
          <div class="number" id="active-users">0</div>
          <div class="label">Active Today</div>
        </div>
      </div>
    </div>

    <div class="tabs">
      <div class="tab active" onclick="switchTab('workspaces')">Workspaces</div>
      <div class="tab" onclick="switchTab('members')">Members</div>
      <div class="tab" onclick="switchTab('permissions')">Permissions</div>
      <div class="tab" onclick="switchTab('activity')">Activity Log</div>
    </div>

    <div class="content">
      <!-- Workspaces Tab -->
      <div id="workspaces-tab" class="tab-content active">
        <div class="action-bar">
          <div class="search-box">
            <input type="text" id="workspace-search" placeholder="Search workspaces..." oninput="filterWorkspaces()">
          </div>
          <button class="btn btn-primary" onclick="showCreateWorkspaceModal()">
            ‚ûï Create Workspace
          </button>
        </div>

        <div class="table-container">
          <table id="workspaces-table">
            <thead>
              <tr>
                <th>Workspace Name</th>
                <th>Owner</th>
                <th>Members</th>
                <th>Created</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <!-- Populated by JavaScript -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Members Tab -->
      <div id="members-tab" class="tab-content">
        <div class="action-bar">
          <div class="search-box">
            <input type="text" id="member-search" placeholder="Search members..." oninput="filterMembers()">
          </div>
          <button class="btn btn-primary" onclick="showInviteMemberModal()">
            ‚úâÔ∏è Invite Member
          </button>
        </div>

        <div class="table-container">
          <table id="members-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Role</th>
                <th>Workspaces</th>
                <th>Last Active</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <!-- Populated by JavaScript -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Permissions Tab -->
      <div id="permissions-tab" class="tab-content">
        <h2 style="margin-bottom: 20px;">Role-Based Access Control (RBAC)</h2>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
          <div style="border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
            <h3 style="color: #0c5460; margin-bottom: 15px;">üëë Admin Role</h3>
            <ul style="list-style: none; padding: 0;">
              <li style="padding: 8px 0; border-bottom: 1px solid #f0f0f0;">‚úÖ Full workspace access</li>
              <li style="padding: 8px 0; border-bottom: 1px solid #f0f0f0;">‚úÖ Manage members</li>
              <li style="padding: 8px 0; border-bottom: 1px solid #f0f0f0;">‚úÖ Delete workspace</li>
              <li style="padding: 8px 0; border-bottom: 1px solid #f0f0f0;">‚úÖ Configure integrations</li>
              <li style="padding: 8px 0;">‚úÖ View audit logs</li>
            </ul>
          </div>

          <div style="border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
            <h3 style="color: #856404; margin-bottom: 15px;">üë§ Member Role</h3>
            <ul style="list-style: none; padding: 0;">
              <li style="padding: 8px 0; border-bottom: 1px solid #f0f0f0;">‚úÖ Read/write tasks</li>
              <li style="padding: 8px 0; border-bottom: 1px solid #f0f0f0;">‚úÖ Create posts</li>
              <li style="padding: 8px 0; border-bottom: 1px solid #f0f0f0;">‚úÖ View analytics</li>
              <li style="padding: 8px 0; border-bottom: 1px solid #f0f0f0;">‚ùå Manage members</li>
              <li style="padding: 8px 0;">‚ùå Delete workspace</li>
            </ul>
          </div>

          <div style="border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
            <h3 style="color: #383d41; margin-bottom: 15px;">üëÅÔ∏è Viewer Role</h3>
            <ul style="list-style: none; padding: 0;">
              <li style="padding: 8px 0; border-bottom: 1px solid #f0f0f0;">‚úÖ Read-only access</li>
              <li style="padding: 8px 0; border-bottom: 1px solid #f0f0f0;">‚úÖ View tasks</li>
              <li style="padding: 8px 0; border-bottom: 1px solid #f0f0f0;">‚úÖ View analytics</li>
              <li style="padding: 8px 0; border-bottom: 1px solid #f0f0f0;">‚ùå Create/edit tasks</li>
              <li style="padding: 8px 0;">‚ùå Manage members</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Activity Log Tab -->
      <div id="activity-tab" class="tab-content">
        <div class="action-bar">
          <div class="search-box">
            <input type="text" id="activity-search" placeholder="Filter activity..." oninput="filterActivity()">
          </div>
          <button class="btn btn-secondary" onclick="exportActivityLog()">
            üì• Export Log
          </button>
        </div>

        <div class="activity-log" id="activity-log">
          <!-- Populated by JavaScript -->
        </div>
      </div>
    </div>
  </div>

  <!-- Create Workspace Modal -->
  <div id="create-workspace-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Create New Workspace</h2>
      </div>
      <div class="form-group">
        <label>Workspace Name *</label>
        <input type="text" id="new-workspace-name" placeholder="e.g., Marketing Team">
      </div>
      <div class="form-group">
        <label>Description</label>
        <textarea id="new-workspace-desc" placeholder="What is this workspace for?"></textarea>
      </div>
      <div class="form-group">
        <label>Owner Email *</label>
        <input type="email" id="new-workspace-owner" placeholder="owner@company.com">
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeModal('create-workspace-modal')">Cancel</button>
        <button class="btn btn-primary" onclick="createWorkspace()">Create Workspace</button>
      </div>
    </div>
  </div>

  <!-- Invite Member Modal -->
  <div id="invite-member-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Invite Team Member</h2>
      </div>
      <div class="form-group">
        <label>Email Address *</label>
        <input type="email" id="invite-email" placeholder="member@company.com">
      </div>
      <div class="form-group">
        <label>Workspace *</label>
        <select id="invite-workspace">
          <option value="">Select workspace...</option>
          <!-- Populated by JavaScript -->
        </select>
      </div>
      <div class="form-group">
        <label>Role *</label>
        <select id="invite-role">
          <option value="viewer">Viewer (Read-only)</option>
          <option value="member">Member (Read/Write)</option>
          <option value="admin">Admin (Full Access)</option>
        </select>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeModal('invite-member-modal')">Cancel</button>
        <button class="btn btn-primary" onclick="inviteMember()">Send Invite</button>
      </div>
    </div>
  </div>

  <script>
    // Mock data (replace with API calls)
    const mockWorkspaces = [
      { id: 1, name: 'Marketing Team', owner: 'sarah@company.com', members: 5, created: '2025-01-15', status: 'active' },
      { id: 2, name: 'Sales Department', owner: 'john@company.com', members: 8, created: '2025-01-20', status: 'active' },
      { id: 3, name: 'Product Development', owner: 'alex@company.com', members: 12, created: '2025-02-01', status: 'active' }
    ];

    const mockMembers = [
      { id: 1, name: 'Sarah Johnson', email: 'sarah@company.com', role: 'admin', workspaces: 2, lastActive: '2026-02-08' },
      { id: 2, name: 'John Smith', email: 'john@company.com', role: 'admin', workspaces: 1, lastActive: '2026-02-08' },
      { id: 3, name: 'Emily Davis', email: 'emily@company.com', role: 'member', workspaces: 3, lastActive: '2026-02-07' }
    ];

    const mockActivity = [
      { user: 'Sarah J', action: 'Created workspace "Marketing Team"', timestamp: '2026-02-08 10:30 AM' },
      { user: 'John S', action: 'Invited emily@company.com to Sales Department', timestamp: '2026-02-08 11:15 AM' },
      { user: 'Admin', action: 'Updated permissions for Product Development', timestamp: '2026-02-08 02:45 PM' }
    ];

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      loadWorkspaces();
      loadMembers();
      loadActivity();
      updateStats();
    });

    function switchTab(tabName) {
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
      
      event.target.classList.add('active');
      document.getElementById(`${tabName}-tab`).classList.add('active');
    }

    function loadWorkspaces() {
      const tbody = document.querySelector('#workspaces-table tbody');
      tbody.innerHTML = mockWorkspaces.map(ws => `
        <tr>
          <td><strong>${ws.name}</strong></td>
          <td>${ws.owner}</td>
          <td>${ws.members} members</td>
          <td>${ws.created}</td>
          <td><span class="badge badge-${ws.status}">${ws.status}</span></td>
          <td class="actions">
            <button class="btn btn-secondary" onclick="editWorkspace(${ws.id})">Edit</button>
            <button class="btn btn-danger" onclick="deleteWorkspace(${ws.id})">Delete</button>
          </td>
        </tr>
      `).join('');
    }

    function loadMembers() {
      const tbody = document.querySelector('#members-table tbody');
      tbody.innerHTML = mockMembers.map(member => `
        <tr>
          <td><strong>${member.name}</strong></td>
          <td>${member.email}</td>
          <td><span class="badge badge-${member.role}">${member.role}</span></td>
          <td>${member.workspaces} workspaces</td>
          <td>${member.lastActive}</td>
          <td class="actions">
            <button class="btn btn-secondary" onclick="editMember(${member.id})">Edit</button>
            <button class="btn btn-danger" onclick="removeMember(${member.id})">Remove</button>
          </td>
        </tr>
      `).join('');
    }

    function loadActivity() {
      const container = document.getElementById('activity-log');
      container.innerHTML = mockActivity.map((activity, idx) => `
        <div class="activity-item">
          <div class="icon">${activity.user.split(' ').map(n => n[0]).join('')}</div>
          <div class="details">
            <div class="action">${activity.action}</div>
            <div class="meta">${activity.timestamp}</div>
          </div>
        </div>
      `).join('');
    }

    function updateStats() {
      document.getElementById('total-workspaces').textContent = mockWorkspaces.length;
      document.getElementById('total-members').textContent = mockMembers.length;
      document.getElementById('active-users').textContent = mockMembers.filter(m => m.lastActive === '2026-02-08').length;
    }

    function showCreateWorkspaceModal() {
      document.getElementById('create-workspace-modal').classList.add('active');
    }

    function showInviteMemberModal() {
      // Populate workspace dropdown
      const select = document.getElementById('invite-workspace');
      select.innerHTML = '<option value="">Select workspace...</option>' + 
        mockWorkspaces.map(ws => `<option value="${ws.id}">${ws.name}</option>`).join('');
      
      document.getElementById('invite-member-modal').classList.add('active');
    }

    function closeModal(modalId) {
      document.getElementById(modalId).classList.remove('active');
    }

    function createWorkspace() {
      const name = document.getElementById('new-workspace-name').value;
      const owner = document.getElementById('new-workspace-owner').value;
      
      if (!name || !owner) {
        alert('Please fill in required fields');
        return;
      }

      alert(`Workspace "${name}" created successfully!`);
      closeModal('create-workspace-modal');
      // TODO: Call API to create workspace
    }

    function inviteMember() {
      const email = document.getElementById('invite-email').value;
      const workspace = document.getElementById('invite-workspace').value;
      
      if (!email || !workspace) {
        alert('Please fill in required fields');
        return;
      }

      alert(`Invitation sent to ${email}!`);
      closeModal('invite-member-modal');
      // TODO: Call API to send invite
    }

    function filterWorkspaces() {
      const search = document.getElementById('workspace-search').value.toLowerCase();
      const rows = document.querySelectorAll('#workspaces-table tbody tr');
      rows.forEach(row => {
        const text = row.textContent.toLowerCase();
        row.style.display = text.includes(search) ? '' : 'none';
      });
    }

    function filterMembers() {
      const search = document.getElementById('member-search').value.toLowerCase();
      const rows = document.querySelectorAll('#members-table tbody tr');
      rows.forEach(row => {
        const text = row.textContent.toLowerCase();
        row.style.display = text.includes(search) ? '' : 'none';
      });
    }

    function filterActivity() {
      const search = document.getElementById('activity-search').value.toLowerCase();
      const items = document.querySelectorAll('.activity-item');
      items.forEach(item => {
        const text = item.textContent.toLowerCase();
        item.style.display = text.includes(search) ? '' : 'none';
      });
    }

    function editWorkspace(id) {
      alert(`Edit workspace ${id} (TODO: Implement)`);
    }

    function deleteWorkspace(id) {
      if (confirm('Are you sure you want to delete this workspace?')) {
        alert(`Workspace ${id} deleted`);
      }
    }

    function editMember(id) {
      alert(`Edit member ${id} (TODO: Implement)`);
    }

    function removeMember(id) {
      if (confirm('Are you sure you want to remove this member?')) {
        alert(`Member ${id} removed`);
      }
    }

    function exportActivityLog() {
      alert('Exporting activity log (TODO: Implement CSV download)');
    }
  </script>
</body>
</html>
