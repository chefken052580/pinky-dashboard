<!-- Wallet Connect Widget - Place this in Settings or Subscription page -->
<div class="wallet-connect-section">
  <h3>$PINKY Token Holder Benefits</h3>
  
  <div id="wallet-status">ðŸ”´ Not connected</div>
  
  <div class="wallet-info-grid" style="display: none;" id="wallet-info-grid">
    <div class="wallet-info-card">
      <h4>Your Balance</h4>
      <p id="token-balance" style="display: none;">0 $PINKY</p>
    </div>
    
    <div class="wallet-info-card">
      <h4>Discount Status</h4>
      <p><span id="discount-badge" class="discount-badge" style="display: none;"></span></p>
    </div>
  </div>
  
  <div class="discount-progress" style="display: none;" id="discount-progress">
    <div class="discount-progress-bar" id="discount-progress-bar" style="width: 0%;">
      <span class="discount-progress-text" id="discount-progress-text">0%</span>
    </div>
  </div>
  
  <div style="margin-top: 20px;">
    <button id="wallet-connect-btn" onclick="window.DashboardWalletConnect && window.DashboardWalletConnect.connect()">
      Connect Wallet
    </button>
    
    <button id="wallet-disconnect-btn" onclick="window.DashboardWalletConnect && window.DashboardWalletConnect.disconnect()" style="display: none;">
      Disconnect Wallet
    </button>
    
    <button id="wallet-refresh-btn" onclick="window.DashboardWalletConnect && window.DashboardWalletConnect.refreshBalance()" style="display: none; margin-left: 10px; background: transparent; border: 1px solid #00d4ff; color: #00d4ff; padding: 10px 20px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;">
      ðŸ”„ Refresh Balance
    </button>
  </div>
  
  <div class="wallet-help-text">
    <strong>ðŸ’¡ How it works:</strong> Connect your Solana wallet to verify your $PINKY token holdings. 
    Holders with 10,000+ $PINKY tokens receive an automatic <strong>20% discount</strong> on Pro subscriptions.
    <br><br>
    Don't have $PINKY tokens? <a href="/landing-page/index.html#token" target="_blank">Learn more about $PINKY</a>
  </div>
</div>

<script>
// Enhanced UI updates when wallet connects/disconnects
if (typeof window.DashboardWalletConnect !== 'undefined') {
  const originalUpdateUI = window.DashboardWalletConnect.updateUI.bind(window.DashboardWalletConnect);
  
  window.DashboardWalletConnect.updateUI = function() {
    originalUpdateUI();
    
    // Show/hide additional UI elements
    const infoGrid = document.getElementById('wallet-info-grid');
    const progressBar = document.getElementById('discount-progress');
    const refreshBtn = document.getElementById('wallet-refresh-btn');
    
    if (this.walletAddress) {
      if (infoGrid) infoGrid.style.display = 'grid';
      if (progressBar) progressBar.style.display = 'block';
      if (refreshBtn) refreshBtn.style.display = 'inline-block';
      
      // Update progress bar
      const progress = Math.min((this.tokenBalance / this.DISCOUNT_THRESHOLD) * 100, 100);
      const progressBarEl = document.getElementById('discount-progress-bar');
      const progressText = document.getElementById('discount-progress-text');
      
      if (progressBarEl) {
        progressBarEl.style.width = progress + '%';
      }
      
      if (progressText) {
        if (this.discountEligible) {
          progressText.textContent = 'âœ… Discount Active';
        } else {
          progressText.textContent = Math.floor(progress) + '%';
        }
      }
    } else {
      if (infoGrid) infoGrid.style.display = 'none';
      if (progressBar) progressBar.style.display = 'none';
      if (refreshBtn) refreshBtn.style.display = 'none';
    }
  };
}
</script>

<!-- Load Solana Web3.js (required for token balance checking) -->
<script src="https://cdn.jsdelivr.net/npm/@solana/web3.js@latest/lib/index.iife.min.js"></script>
